<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
	</body>
	<script type="text/javascript">
		var httpurl = "http://baidu.com"
		var ajaxP = getAjax(httpurl)
		
		// 封装
		function getAjax(url){
			return new Promise(function(resolve,reject){
				// 1创建xhr
				var xhr = new XMLHttpRequest();
				
				// 2设置路劲
				var httlUrl = url;
				xhr.open("GET",httlUrl);
				
				// 3.监听
				xhr.onreadystatechange = function(){
					if(xhr.status == 200 && xhr.readyState ==4){
						// 处理获得数据
						resolve(xhr);
					}else if(xhr.readyState == 4&&xhr.status!=200){
						// 处理失败的结果
						reject(xhr);
					}
				}
				
				// 4发送
				xhr.send();
			})
		}
		
		console.log(ajaxP)
		
		ajaxP.then(function(res){
			var result = JSON.parse(res.response)
			console.log(res)
			console.log(result)
		})
		
		// // promise
		// var ajaxP = new Promise(function(resolve,reject){
		// 	// 1创建xhr
		// 	var xhr = new XMLHttpRequest();
			
		// 	// 2设置路劲
		// 	var httlUrl = "https://www.baidu.com/sugrec?prod=pc_his&from=pc_web&json=1&sid=1462_32947_31254_32723_32962_32845_32913&hisdata=%5B%7B%22time%22%3A1558268140%2C%22kw%22%3A%22java%20%E6%97%A5%E6%9C%9F%22%7D%2C%7B%22time%22%3A1558268210%2C%22kw%22%3A%22java%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E5%B9%B4%E4%BB%BD%22%7D%2C%7B%22time%22%3A1558268721%2C%22kw%22%3A%22springboot%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%22%7D%2C%7B%22time%22%3A1558268756%2C%22kw%22%3A%22springboot%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81%22%7D%2C%7B%22time%22%3A1558268927%2C%22kw%22%3A%22springboot%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81%E8%BF%94%E5%9B%9E%E8%A1%A8%E5%8D%95%22%7D%2C%7B%22time%22%3A1558268956%2C%22kw%22%3A%22springboot%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81restful%22%7D%2C%7B%22time%22%3A1558269169%2C%22kw%22%3A%22springboot%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81%E6%8E%A7%E5%88%B6%E5%B1%82%22%7D%2C%7B%22time%22%3A1558269478%2C%22kw%22%3A%22model%20model%22%7D%2C%7B%22time%22%3A1558278159%2C%22kw%22%3A%22springboot%E6%98%A0%E5%B0%84mybatis%20plus%20xml%22%7D%2C%7B%22time%22%3A1558279448%2C%22kw%22%3A%22dao%E6%94%BE%E4%BB%80%E4%B9%88%E6%96%87%E4%BB%B6%22%7D%5D&_t=1604544574546&req=2&csor=0";
		// 	xhr.open("GET",httlUrl);
			
		// 	// 3.监听
		// 	xhr.onreadystatechange = function(){
		// 		if(xhr.status == 200 && xhr.readyState ==4){
		// 			// 处理获得数据
		// 			resolve(xhr);
		// 		}else if(xhr.readyState == 4&&xhr.status!=200){
		// 			// 处理失败的结果
		// 			reject(xhr);
		// 		}
		// 	}
			
		// 	// 4发送
		// 	xhr.send();
		// })
		
		// 标准已封装
		fetch(httpurl).then(function(res){
			console.log(res)
		})
	</script>
</html>
